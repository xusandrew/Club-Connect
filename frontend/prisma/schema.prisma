// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

// prisma/schema.prisma

datasource db {
  provider = "postgresql"
  url      = "postgresql://postgres:postgres@localhost:5555/DATABASE"
}

model Club {
  cid      String         @id @default(uuid())
  email    String         @unique
  password String
  event    Event[] // Event referencing Club, one-to-many relation
  category ClubCategory[] // ClubCategory, many-to-many relation
  ClubInfo ClubInfo? // Defines a one-to-one relationship, optional (idk why)
}

model Event {
  eid         String   @id @default(uuid())
  cid         String
  club        Club     @relation(fields: [cid], references: [cid])
  title       String
  description String?
  location    String?
  start_time  DateTime
  end_time    DateTime
  posted_time DateTime @default(now())
}

model Category {
  type String         @id
  club ClubCategory[]
}

model ClubCategory {
  cid      String
  club     Club     @relation(fields: [cid], references: [cid])
  type     String
  category Category @relation(fields: [type], references: [type])

  @@id([cid, type]) // Identify by club and their category
}

model ClubInfo {
  cid         String  @unique
  club        Club    @relation(fields: [cid], references: [cid])
  name        String  @unique
  description String?
  Instagram   String?
  Discord     String?
}
